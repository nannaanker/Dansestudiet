---
import MainLayout from "../layouts/MainLayout.astro";
import Button from "../components/Button.astro";
import Image from "astro/components/Image.astro";
import danceMotherFuckerDance from "../assets/images/dance-motherfucker-dance.jpg";
const dansehold = await Astro.glob("./dansehold/*.md");
const sorteredenyheder = dansehold.sort((a, b) => Date.parse(b.frontmatter.dato) - Date.parse(a.frontmatter.dato));
const udvalgtenyheder = sorteredenyheder.slice(0, 6);
---

<MainLayout title="Dansestudiet">
  <div class="h-52 bg-pink-50 grid justify-items-center"><h1 class="mt-20 font-hero text-rod-600 text-9xl">DANSESTUDIET</h1></div>
  <article class="relative bg-cover h-700 bg-[url('/hero.jpg')]"></article>
  <div class="h-52 bg-pink-50 mb-16 grid justify-items-center"><Button>SE KlASSERNE HER</Button></div>

  <div class="grid justify-items-center"><h2 class="mb-8 text-pink-50 font-display text-4xl">Dansehold denne sæson</h2></div>

  <!-- alt hvad der omhandler lists til nyheder -->

  <section class="mb-16 p-4 relative max-w-3xl mx-auto">
    <ul id="wrapper" class="flex flex-row overflow-hidden gap-5 snap-x">
      {
        udvalgtenyheder.map((post) => (
          <li id="slide" class="max-w-sm duration-700 hover:scale-105 ease-in-out shrink-0 snap-center">
            <div class=" w-64 h-96 grid justify-items-center text-center text-rod-600 bg-pink-100 mt-2 p-2">
              <div class="">
                <img src={post.frontmatter.coverimage} alt={post.frontmatter.coveralt} class="h-28 w-28 my-5" />
              </div>
              <div class="">
                <h3 class="text-lg font-bold">
                  <a class href={post.url} class="text-persianmosaic-700">
                    {post.frontmatter.title}
                  </a>
                </h3>
                <p class="text-sm"> {post.frontmatter.underviser}</p>
                <span class="text-xs">{post.frontmatter.dato}</span>
                <p class="text-sm"> {post.frontmatter.niveau}</p>
                <p class="text-sm"> {post.frontmatter.pris}</p>
                <p class="text-sm"> {post.frontmatter.sted}</p>
                <p class="text-sm"> {post.frontmatter.kortversion}</p>
                <a href={post.url} class="">
                  <Button>Læs mere</Button>
                </a>
              </div>
            </div>
          </li>
        ))
      }
    </ul>

    <!-- slut på alt hvad der omhandler lists til nyheder -->
    <button id="prevbtn" type="button" class="flex absolute top-1/2 left-3 z-40 items-center justify-center w-10 h-5 bg-rod-300 hover:bg-rod-600 focus:outline-none transition">
      <svg class="w-5 h-5 text-pink-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-width="3" d="M15 19l-7-7 7-7"></path>
      </svg>
    </button>
    <button id="nextbtn" type="button" class="flex absolute top-1/2 right-3 z-40 items-center justify-center w-10 h-5 bg-rod-300 hover:bg-rod-600 focus:outline-none transition">
      <svg class="w-5 h-5 text-pink-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-width="3" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>
  </section>

  <script>
    const prevBtn = document.querySelector("#prevbtn");
    const nextBtn = document.querySelector("#nextbtn");
    const slide = document.querySelector("#slide");
    const wrapper = document.querySelector("#wrapper");
    let count = 0;
    prevBtn.style.visibility = "hidden";

    nextBtn.addEventListener("click", () => {
      count++;
      if (count === 5) {
        nextBtn.style.visibility = "hidden";
      } else if (count >= 1) {
        prevBtn.style.visibility = "visible";
      }
      const scrollAmount = slide.offsetWidth;
      wrapper.scrollBy({
        left: scrollAmount,
        behavior: "smooth",
      });
    });

    prevBtn.addEventListener("click", () => {
      count--;

      if (count === 0) {
        prevBtn.style.visibility = "hidden";
      } else if (count >= 1) {
        prevBtn.style.visibility = "visible";
        nextBtn.style.visibility = "visible";
      }
      const scrollAmount = slide.offsetWidth;
      wrapper.scrollBy({
        left: -scrollAmount,
        behavior: "smooth",
      });
    });
  </script>
</MainLayout>
